{"remainingRequest":"F:\\前端\\mi\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\前端\\mi\\src\\pages\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\前端\\mi\\src\\pages\\User.vue","mtime":1585554395534},{"path":"F:\\前端\\mi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgTGVmdE5hdiBmcm9tICcuLi9sYXlvdXRzL0xlZnROYXYudnVlJwoJaW1wb3J0IEZvb3QgZnJvbSAnLi4vbGF5b3V0cy9Gb290LnZ1ZScKCWltcG9ydCB7bWFwU3RhdGUsbWFwQWN0aW9uc30gZnJvbSAidnVleCIKCWNvbnN0IGNvdXBvbiA9IHsKCQkKCQlhdmFpbGFibGU6IDEsCgkJY29uZGl0aW9uOiAn5peg5L2/55So6Zeo5qebXG7mnIDlpJrkvJjmg6AxMuWFgycsCgkJcmVhc29uOiAnJywKCQl2YWx1ZTogMTUwLAoJCW5hbWU6ICfkvJjmg6DliLjlkI3np7AnLAoJCXN0YXJ0QXQ6IDE0ODkxMDQwMDAsCgkJZW5kQXQ6IDE1MTQ1OTIwMDAsCgkJdmFsdWVEZXNjOiAnMS41JywKCQl1bml0RGVzYzogJ+WFgycKCX07CglleHBvcnQgZGVmYXVsdCB7CgkJYmVmb3JlUm91dGVFbnRlcih0byxmcm9tLG5leHQpewoJCSAgYXhpb3MoewoJCSAgICB1cmw6Jy9hcGkvdXNlcicsCgkJICB9KS50aGVuKAoJCSAgICByZXM9PnsKCQkgICAgICBpZihyZXMuZGF0YS5lcnI9PTApewoJCSAgICAgICAgbmV4dCgpCgkJICAgICAgfWVsc2V7CgkJCQkJCWNvbnNvbGUubG9nKCJyZXNlcnIiLHJlcyk7CgkJICAgICAgICBuZXh0KCcvbG9naW4nKQoJCSAgICAgIH0KCQkgICAgfQoJCSAgKQoJCX0sCgkJbmFtZTogJ1VzZXInLAoJCXByb3BzOiB7fSwKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJdXNlcm5hbWU6IiIsCgkJCQlwYXNzd29yZDoiIiwKCQkJCVVzZXNySW5mbzpmYWxzZSwKCQkJCWNob3NlbkNvdXBvbjogLTEsCgkJCQljb3Vwb25zOiBbY291cG9uXSwKCQkJCWRpc2FibGVkQ291cG9uczogW2NvdXBvbl0sCgkJCQlzaG93TGlzdDogZmFsc2UsCgkJCQllbWFpbDogJ+acque7keWumicsCgkJCQl6aGlmdTogMCwKCQkJCXNob3VodW86IDAsCgkJCQljb21tZW50czogMCwKCQkJCWxpa2U6IDAsCgkJCQkvLyB1c2VyOiBudWxsCgkJCX0KCQl9LAoJCWNvbXBvbmVudHM6IHsKCQkJTGVmdE5hdiwKCQkJRm9vdAoJCX0sCgkJYWN0aXZhdGVkKCkge30sCgkJbW91bnRlZCgpIHsKCQkJY29uc29sZS5sb2coImRkZCIsIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkuZGF0YSk7CgkJCS8vIHRoaXMuJHN0b3JlLmNvbW1pdCgndXNlci9VU0VSJyxKU09OLnBhcnNlKGxvY2FsKSkKICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goYHVzZXIvJHt0aGlzLiR0eXBlcy5VU0VSfWApCgkJCS8vIHRoaXMudXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkuZGF0YTsKCQl9LAoJCXVwZGF0ZWQoKSB7fSwKCQljb21wdXRlZDp7Li4ubWFwU3RhdGUoInVzZXIiLFsidXNlciJdKX0sCgkJbWV0aG9kczogewoJCQljaGFuZ2VVc2VySW5mbygpewoJCQkJdGhpcy5Vc2VzckluZm89ZmFsc2U7CgkJCQlsZXQge19pZH0gPSB0aGlzLnVzZXIuZGF0YTsKCQkJCWxldCB7dG9rZW59ID0gdGhpcy51c2VyOwoJCQkJCgkJCQl0aGlzLiRheGlvcyh7CgkJCQkJdXJsOiIvYXBpL3VzZXIiLAoJCQkJCW1ldGhvZDoicG9zdCIsCgkJCQkJZGF0YTp7X2lkLHRlbDp0aGlzLnVzZXIuZGF0YS50ZWwsdXNlcm5hbWU6dGhpcy51c2VybmFtZSxwYXNzd29yZDp0aGlzLnBhc3N3b3JkfQoJCQkJfSkudGhlbigKCQkJCQlyZXM9PgoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgndXNlci9VU0VSJywKCQkJCQl7ZXJyOjAsZGF0YTp7X2lkLHRlbDp0aGlzLnVzZXIuZGF0YS50ZWwsdXNlcm5hbWU6dGhpcy51c2VybmFtZSxwYXNzd29yZDp0aGlzLnBhc3N3b3JkfSx0b2tlbn0sCgkJCQkJKQoJCQkJKQoJCQl9LAoJCQlvbkNoYW5nZShpbmRleCkgewoJCQkJdGhpcy5zaG93TGlzdCA9IGZhbHNlOwoJCQkJdGhpcy5jaG9zZW5Db3Vwb24gPSBpbmRleDsKCQkJfSwKCQkJb25FeGNoYW5nZShjb2RlKSB7CgkJCQl0aGlzLmNvdXBvbnMucHVzaChjb3Vwb24pOwoJCQl9LAoJCQlsb2dvdXQoKSB7CgkJCQkvL+WIoOmZpCDmnKzlnLAgdG9rZW4gdnVleAoJCQkJd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJykKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgndXNlci9VU0VSJywgewoJCQkJCWVycjogMQoJCQkJfSkKCQkJCS8v5Y+R6YCB5rOo6ZSA6K+35rGCCgkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykKCQkJfQoJCX0KCX0K"},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div class=\"User\" v-if=\"user!=null\">\r\n\t\t<!-- <LeftNav/> -->\r\n\t\t<div class=\"User__right\">\r\n\t\t\t<div class=\"user-r-top\">\r\n\t\t\t\t<div class=\"icon\"><img src=\"../assets/img/f790b51a76afd7b41522048fa779d69d.jpg\" alt=\"\"></div>\r\n\t\t\t\t<div class=\"user-r-info\">\r\n\t\t\t\t\t<h3>{{user.data.tel}}</h3>\r\n\t\t\t\t\t<p>欢迎光顾小米商城</p>\r\n\t\t\t\t\t<a href=\"#\" @click=\"UsesrInfo=true\">修改个人信息 > </a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\t<van-popup v-model=\"UsesrInfo\" round :style=\"{width:'80%',height:'6rem'}\">\r\n\t\t\t\t\t<h3 style=\"text-align: center;line-height: 1rem;font-weight: 400;\">修改信息</h3>\r\n\t\t\t\t\t<van-field v-model=\"username\" label=\"用户名\" placeholder=\"请输入用户名\" />\r\n\t\t\t\t\t<van-field v-model=\"user.data.tel\" type=\"tel\" label=\"手机号\"  placeholder=\"请输入手机号\"/>\r\n\t\t\t\t\t<van-field v-model=\"password\" type=\"password\" label=\"密码\"  placeholder=\"请输入密码\"/>\r\n\t\t\t\t\t<van-button type=\"warning\" block  @click=\"changeUserInfo\">确认修改</van-button>\r\n\t\t\t\t</van-popup>\r\n\t\t\t\r\n\t\t\t<van-grid>\r\n\t\t\t\t<van-grid-item icon=\"paid\" text=\"我的收藏\" />\r\n\t\t\t\t<van-grid-item icon=\"discount\" text=\"我的积分\" />\r\n\t\t\t\t<van-grid-item icon=\"location-o\" text=\"收货地址\" />\r\n\t\t\t\t<van-grid-item icon=\"todo-list-o\" text=\"我的订单\" />\r\n\t\t\t</van-grid>\r\n\t\t\t<van-grid>\r\n\t\t\t\t<van-grid-item icon=\"paid\" text=\"待支付\" />\r\n\t\t\t\t<van-grid-item icon=\"point-gift-o\" text=\"待发货\" />\r\n\t\t\t\t<van-grid-item icon=\"logistics\" text=\"待收货\" />\r\n\t\t\t\t<van-grid-item icon=\"clock-o\" text=\"待评价\" />\r\n\t\t\t</van-grid>\r\n\r\n\t\t\t<van-coupon-cell :coupons=\"coupons\" :chosen-coupon=\"chosenCoupon\" @click=\"showList = true\" />\r\n\t\t\t<!-- 优惠券列表 -->\r\n\t\t\t<van-popup v-model=\"showList\" round position=\"bottom\" style=\"height: 90%; padding-top: 4px;\">\r\n\t\t\t\t<van-coupon-list :coupons=\"coupons\" :chosen-coupon=\"chosenCoupon\" :disabled-coupons=\"disabledCoupons\" @change=\"onChange\"\r\n\t\t\t\t @exchange=\"onExchange\" />\r\n\t\t\t</van-popup>\r\n\r\n\t\t\t<van-cell title=\"会员福利社\" icon=\"diamond-o\" is-link />\r\n\t\t\t<van-cell title=\"我的权益\" icon=\"award-o\" is-link />\r\n\t\t\t<van-cell title=\"帮助中心\" icon=\"question-o\" is-link />\r\n\t\t\t<van-cell title=\"设置\" icon=\"setting-o\" is-link />\r\n\t\t\t<van-cell title=\"关于我们\" icon=\"smile-o\" is-link />\r\n\t\t\t<div style=\"width: 2rem;margin: auto;margin-top: 20px;\">\r\n\t\t\t\t<van-button round type=\"warning\" size=\"small\" @click=\"logout\">退出登录</van-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport LeftNav from '../layouts/LeftNav.vue'\r\n\timport Foot from '../layouts/Foot.vue'\r\n\timport {mapState,mapActions} from \"vuex\"\r\n\tconst coupon = {\r\n\t\t\r\n\t\tavailable: 1,\r\n\t\tcondition: '无使用门槛\\n最多优惠12元',\r\n\t\treason: '',\r\n\t\tvalue: 150,\r\n\t\tname: '优惠券名称',\r\n\t\tstartAt: 1489104000,\r\n\t\tendAt: 1514592000,\r\n\t\tvalueDesc: '1.5',\r\n\t\tunitDesc: '元'\r\n\t};\r\n\texport default {\r\n\t\tbeforeRouteEnter(to,from,next){\r\n\t\t  axios({\r\n\t\t    url:'/api/user',\r\n\t\t  }).then(\r\n\t\t    res=>{\r\n\t\t      if(res.data.err==0){\r\n\t\t        next()\r\n\t\t      }else{\r\n\t\t\t\t\t\tconsole.log(\"reserr\",res);\r\n\t\t        next('/login')\r\n\t\t      }\r\n\t\t    }\r\n\t\t  )\r\n\t\t},\r\n\t\tname: 'User',\r\n\t\tprops: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tpassword:\"\",\r\n\t\t\t\tUsesrInfo:false,\r\n\t\t\t\tchosenCoupon: -1,\r\n\t\t\t\tcoupons: [coupon],\r\n\t\t\t\tdisabledCoupons: [coupon],\r\n\t\t\t\tshowList: false,\r\n\t\t\t\temail: '未绑定',\r\n\t\t\t\tzhifu: 0,\r\n\t\t\t\tshouhuo: 0,\r\n\t\t\t\tcomments: 0,\r\n\t\t\t\tlike: 0,\r\n\t\t\t\t// user: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tLeftNav,\r\n\t\t\tFoot\r\n\t\t},\r\n\t\tactivated() {},\r\n\t\tmounted() {\r\n\t\t\tconsole.log(\"ddd\", JSON.parse(localStorage.getItem('user')).data);\r\n\t\t\t// this.$store.commit('user/USER',JSON.parse(local))\r\n      // this.$store.dispatch(`user/${this.$types.USER}`)\r\n\t\t\t// this.user = JSON.parse(localStorage.getItem('user')).data;\r\n\t\t},\r\n\t\tupdated() {},\r\n\t\tcomputed:{...mapState(\"user\",[\"user\"])},\r\n\t\tmethods: {\r\n\t\t\tchangeUserInfo(){\r\n\t\t\t\tthis.UsesrInfo=false;\r\n\t\t\t\tlet {_id} = this.user.data;\r\n\t\t\t\tlet {token} = this.user;\r\n\t\t\t\t\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\turl:\"/api/user\",\r\n\t\t\t\t\tmethod:\"post\",\r\n\t\t\t\t\tdata:{_id,tel:this.user.data.tel,username:this.username,password:this.password}\r\n\t\t\t\t}).then(\r\n\t\t\t\t\tres=>\r\n\t\t\t\t\tthis.$store.commit('user/USER',\r\n\t\t\t\t\t{err:0,data:{_id,tel:this.user.data.tel,username:this.username,password:this.password},token},\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\tonChange(index) {\r\n\t\t\t\tthis.showList = false;\r\n\t\t\t\tthis.chosenCoupon = index;\r\n\t\t\t},\r\n\t\t\tonExchange(code) {\r\n\t\t\t\tthis.coupons.push(coupon);\r\n\t\t\t},\r\n\t\t\tlogout() {\r\n\t\t\t\t//删除 本地 token vuex\r\n\t\t\t\twindow.localStorage.removeItem('user')\r\n\t\t\t\tthis.$store.commit('user/USER', {\r\n\t\t\t\t\terr: 1\r\n\t\t\t\t})\r\n\t\t\t\t//发送注销请求\r\n\t\t\t\tthis.$router.push('/login')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.User {\r\n\t\tbackground: #f5f5f5;\r\n\t\tmargin: 1.35rem 0;\r\n\t}\r\n\r\n\t.User>div {\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: top;\r\n\t}\r\n\r\n\t/* .user-r-top>div{} */\r\n\t.User__right {\r\n\t\tmargin-top: 5px;\r\n\t\twidth: 100%;\r\n\t\tmargin-left: 10px;\r\n\t\tbackground: #fff;\r\n\t\tpadding: 0 20px;\r\n\t\tbox-sizing: border-box\r\n\t}\r\n\r\n\t.user-r-top {\r\n\t\tmargin-bottom: 13px;\r\n\t\twidth: 100%;\r\n\t\theight: 2rem;\r\n\t\tpadding: 20px 0;\r\n\t\tborder-bottom: 1px solid #b0b0b0;\r\n\t}\r\n\r\n\t.user-r-top>div {\r\n\t\tfloat: left;\r\n\t}\r\n\r\n\t.icon {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tborder-radius: 50%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.icon>img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.user-r-info {\r\n\t\tmargin-left: 10px\r\n\t}\r\n\r\n\t.user-r-info>h3 {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #757575;\r\n\t}\r\n\r\n\t.user-r-info>p {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #b0b0b0;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.user-r-info>a {\r\n\t\tfont-size: 10px;\r\n\t\tcolor: $baseColor;\r\n\t\tline-height: 20px\r\n\t}\r\n\r\n\t// .user-r-zh>p{font-size: 12px;color:#b0b0b0;line-height: 18px }\r\n\r\n\t.user-r-bottom>div {\r\n\t\tpadding: 20px 0\r\n\t}\r\n\r\n\t.user-r-bottom .icon {\r\n\t\twidth: 44px;\r\n\t\theight: 44px;\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: middle\r\n\t}\r\n\r\n\t.user-r-bottom .icon>img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%\r\n\t}\r\n\r\n\t.user-r-bottom .user-r-info {\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: middle\r\n\t}\r\n\r\n\t.user-r-bottom h3 {\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #757575\r\n\t}\r\n\r\n\t.user-r-bottom span {\r\n\t\tcolor: $baseColor\r\n\t}\r\n\r\n\t.user-r-bottom a {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #757575;\r\n\t}\r\n\r\n\t.van-grid-item__content--center {\r\n\t\tcolor: #ff6700;\r\n\t}\r\n\r\n\t.van-button {\r\n\t\tmargin: auto;\r\n\t}\r\n</style>\r\n"]}]}