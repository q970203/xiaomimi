{"remainingRequest":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js!F:\\前端\\mi\\src\\plugins\\axios.js","dependencies":[{"path":"F:\\前端\\mi\\src\\plugins\\axios.js","mtime":1584580892524},{"path":"F:\\前端\\mi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgdm0gZnJvbSAnLi4vbWFpbi5qcyc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXIuanMnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi92dWV4LmpzJzsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25zb2xlLmxvZygn5oum5oiq5ZmoJyk7IC8v6K+35rGC5Y+R5Ye65LmL5YmN6K6+572u57uf5LiA55qEdG9rZW4KCiAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIHRva2VuID0gdG9rZW4gPyB0b2tlbiA6ICcnLCBjb25maWcuaGVhZGVycyA9IHsKICAgIHRva2VuOiB0b2tlbgogIH07CiAg5o6n5Yi2bG9hZGluZ+aYvuekujsKICBzdG9yZS5zdGF0ZS5iTG9hZGluZyA9IHRydWU7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8v5re75Yqg5LiA5Liq5ZON5bqU55qE5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHN0b3JlLnN0YXRlLmJMb2FkaW5nID0gZmFsc2U7CiAgdmFyIGN1cnJlbnRSb3V0ZSA9IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGg7CiAgY29uc29sZS5sb2coJ2N1cnJlbnRSb3V0ZScsIGN1cnJlbnRSb3V0ZSk7CiAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CgogIGlmIChyZXNwb25zZS5kYXRhLmVyciAhPSAwICYmICFjdXJyZW50Um91dGUuaW5jbHVkZXMoJy9sb2dpbicpKSB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIHBhdGg6ICcvbG9naW4nLAogICAgICBxdWVyeTogewogICAgICAgIHA6IGN1cnJlbnRSb3V0ZQogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7ClZ1ZS5wcm90b3R5cGUuJGF4aW9zID0gYXhpb3M7CndpbmRvdy5heGlvcyA9IGF4aW9zOwpleHBvcnQgZGVmYXVsdCBheGlvczs="},{"version":3,"sources":["F:/前端/mi/src/plugins/axios.js"],"names":["Vue","vm","axios","router","store","interceptors","request","use","config","console","log","token","window","localStorage","getItem","headers","控制loading显示","state","bLoading","error","Promise","reject","response","currentRoute","fullPath","data","err","includes","push","path","query","p","prototype","$axios"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACAF,KAAK,CAACG,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAUC,MAAV,EAAkB;AAChDC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EADgD,CAEhD;;AACA,MAAIC,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAZ;AACAH,EAAAA,KAAK,GAAGA,KAAK,GAAGA,KAAH,GAAW,EAAxB,EACAH,MAAM,CAACO,OAAP,GAAiB;AACfJ,IAAAA,KAAK,EAACA;AADS,GADjB;AAIAK,EAAAA,WAAW;AACVZ,EAAAA,KAAK,CAACa,KAAN,CAAYC,QAAZ,GAAqB,IAArB;AACA,SAAOV,MAAP;AACD,CAXD,EAWG,UAAUW,KAAV,EAAiB;AAClB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAbD,E,CAcA;;AACAjB,KAAK,CAACG,YAAN,CAAmBiB,QAAnB,CAA4Bf,GAA5B,CAAgC,UAASe,QAAT,EAAkB;AACjDlB,EAAAA,KAAK,CAACa,KAAN,CAAYC,QAAZ,GAAsB,KAAtB;AACA,MAAIK,YAAY,GAAGpB,MAAM,CAACoB,YAAP,CAAoBC,QAAvC;AACAf,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2Ba,YAA3B;AACAd,EAAAA,OAAO,CAACC,GAAR,CAAYY,QAAQ,CAACG,IAArB;;AACA,MAAGH,QAAQ,CAACG,IAAT,CAAcC,GAAd,IAAmB,CAAnB,IAAwB,CAACH,YAAY,CAACI,QAAb,CAAsB,QAAtB,CAA5B,EAA4D;AAC3DxB,IAAAA,MAAM,CAACyB,IAAP,CAAY;AACXC,MAAAA,IAAI,EAAC,QADM;AAEXC,MAAAA,KAAK,EAAC;AAACC,QAAAA,CAAC,EAACR;AAAH;AAFK,KAAZ;AAIA;;AACD,SAAOD,QAAP;AACA,CAZD,EAYE,UAASH,KAAT,EAAe;AAChB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAdD;AAgBAnB,GAAG,CAACgC,SAAJ,CAAcC,MAAd,GAAuB/B,KAAvB;AACAU,MAAM,CAACV,KAAP,GAAeA,KAAf;AACA,eAAeA,KAAf","sourcesContent":["import Vue from 'vue'\r\nimport vm from '../main.js'\r\nimport axios from 'axios'\r\nimport router from './router.js'\r\nimport store from './vuex.js'\r\naxios.interceptors.request.use(function (config) {\r\n\tconsole.log('拦截器')\r\n\t//请求发出之前设置统一的token\r\n\tlet token = window.localStorage.getItem('token')\r\n\ttoken = token ? token : '',\r\n\tconfig.headers = {\r\n\t \ttoken:token\r\n }\r\n 控制loading显示\r\n  store.state.bLoading=true;\r\n  return config;\r\n}, function (error) {\r\n  return Promise.reject(error);\r\n});\r\n//添加一个响应的拦截器\r\naxios.interceptors.response.use(function(response){\r\n\tstore.state.bLoading= false;\r\n\tlet currentRoute = router.currentRoute.fullPath;\r\n\tconsole.log('currentRoute',currentRoute)\r\n\tconsole.log(response.data)\r\n\tif(response.data.err!=0 && !currentRoute.includes('/login')){\r\n\t\trouter.push({\r\n\t\t\tpath:'/login',\r\n\t\t\tquery:{p:currentRoute}\r\n\t\t})\r\n\t}\r\n\treturn response;\r\n},function(error){\r\n\treturn Promise.reject(error)\r\n});\r\n\r\nVue.prototype.$axios = axios;\r\nwindow.axios = axios\r\nexport default axios;\r\n"]}]}