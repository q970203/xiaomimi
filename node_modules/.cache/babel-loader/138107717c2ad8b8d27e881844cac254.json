{"remainingRequest":"F:\\前端\\mi\\node_modules\\thread-loader\\dist\\cjs.js!F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js!F:\\前端\\mi\\src\\store\\modules\\cart.js","dependencies":[{"path":"F:\\前端\\mi\\src\\store\\modules\\cart.js","mtime":1585554395548},{"path":"F:\\前端\\mi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJGOlxcXHU1MjREXHU3QUVGXFxtaVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKdmFyIF9hY3Rpb25zLCBfbXV0YXRpb25zOwoKaW1wb3J0IGFyZWFMaXN0IGZyb20gJy4uLy4uL3BsdWdpbnMvY2l0eS5qcyc7CmltcG9ydCBzZWFyY2hJbmRleCBmcm9tICcuLi8uLi9wbHVnaW5zL3NlYXJjaEluZGV4LmpzJzsKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vdHlwZXMnOyAvL+aVtOS9k+i+k+WFpe+8jOWtmOS4unR5cGVz5a+56LGhCgppbXBvcnQgeyBnZXQgfSBmcm9tICcuLi9zZXJ2aWNlLmpzJzsKaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uL3BsdWdpbnMvYXhpb3MuanMnOwppbXBvcnQgeyBEaWFsb2cgfSBmcm9tICd2YW50JzsKdmFyIHN0YXRlID0gewogIGNhcnRHb29kc0xpc3Q6IFtdLAogIHRvdGFsOiAwLAogIGFsbENoZWNrZWQ6IHRydWUsCiAgc2hvd0FkZDogZmFsc2UsCiAgLy/nvJbovpHlnLDlnYAKICBhcmVhTGlzdDogYXJlYUxpc3QsCiAgLy/nnIHluILljLrliJfooagKICBhZGRHb29kczogW10gLy/pgInmi6nllYblk4EKCn07CnZhciBhY3Rpb25zID0gKF9hY3Rpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgdHlwZXMuQ0FSVCwgZnVuY3Rpb24gKF9yZWYsIHBheWxvYWQpIHsKICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTsKICBnZXQoewogICAgYXBpbmFtZTogJ2NhcnQnLAogICAgcGFyYW1zOiB7CiAgICAgIF9saW1pdDogNSwKICAgICAgX3NvcnQ6ICJkYXRlIgogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgY29tbWl0KCdDQVJUJywgcmVzdWx0KTsKCiAgICBpZiAocmVzdWx0KSB7CiAgICAgIGNvbW1pdCgiU1VNIik7CiAgICB9CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsICJkZWxHb29kcyIsIGZ1bmN0aW9uIGRlbEdvb2RzKF9yZWYyLCBwYXlsb2FkKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICBjb25zb2xlLmxvZygicGF5bG9hZCIsIHBheWxvYWQpOwogIERpYWxvZy5jb25maXJtKHsKICAgIG1lc3NhZ2U6ICfnoa7lrprliKDpmaTor6XllYblk4HlkJfvvJ8nCiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICBheGlvcyh7CiAgICAgIHVybDogIi9hcGkvYWRkY2FydC8iICsgcGF5bG9hZCwKICAgICAgLy8gcGFyYW1zOnBheWxvYWQsCiAgICAgIG1ldGhvZDogImRlbGV0ZSIKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmRhdGEuZXJyID09IDApIHsKICAgICAgICBzdGF0ZS5jYXJ0R29vZHNMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICBpZiAoaXRlbS5faWQgPT0gcGF5bG9hZCkgewogICAgICAgICAgICBzdGF0ZS5jYXJ0R29vZHNMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29tbWl0KCdERUxfR09PRFMnLCBzdGF0ZS5jYXJ0R29vZHNMaXN0KTsKICAgICAgICBjb21taXQoIlNVTSIpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCLliKDpmaTlpLHotKUiKTsKICAgICAgfQogICAgfSk7CiAgfSk7Cn0pLCBfYWN0aW9ucyk7CnZhciBtdXRhdGlvbnMgPSAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgdHlwZXMuQ0FSVCwgZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7CiAgaWYgKHBheWxvYWQpIHsKICAgIHN0YXRlLmNhcnRHb29kc0xpc3QgPSBwYXlsb2FkOwogIH0gZWxzZSB7CiAgICBzdGF0ZS5jYXJ0R29vZHNMaXN0ID0gW107CiAgfQp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsICJERUxfR09PRFMiLCBmdW5jdGlvbiBERUxfR09PRFMoc3RhdGUsIHBheWxvYWQpIHsKICBzdGF0ZS5jYXJ0R29vZHNMaXN0ID0gcGF5bG9hZDsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCAiQ0hFQ0tFRF9HT09EUyIsIGZ1bmN0aW9uIENIRUNLRURfR09PRFMoc3RhdGUsIF9yZWYzKSB7CiAgdmFyIGNoZWNrZWQgPSBfcmVmMy5jaGVja2VkLAogICAgICBpbmRleCA9IF9yZWYzLmluZGV4OwogIHN0YXRlLmNhcnRHb29kc0xpc3RbaW5kZXhdLmNoZWNrZWQgPSBjaGVja2VkOwogIHZhciBkYXRhID0gc3RhdGUuY2FydEdvb2RzTGlzdDsKICB2YXIgaGFzQ2hlY2tlZCA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLmNoZWNrZWQ7CiAgfSk7CgogIGlmIChoYXNDaGVja2VkLmxlbmd0aCA8IGRhdGEubGVuZ3RoKSB7CiAgICBzdGF0ZS5hbGxDaGVja2VkID0gZmFsc2U7IC8v5aaC5p6c5LiN5piv5omA5pyJ55qE5ZWG5ZOB6YO96KKr6YCJ5Lit77yM5YiZ5YWo6YCJ5Li6ZmFsc2UKICB9IGVsc2UgewogICAgc3RhdGUuYWxsQ2hlY2tlZCA9IHRydWU7CiAgfQp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsICJDSEVDS0FMTCIsIGZ1bmN0aW9uIENIRUNLQUxMKHN0YXRlLCBwYXlsb2FkKSB7CiAgdmFyIGRhdGEgPSBzdGF0ZS5jYXJ0R29vZHNMaXN0OwogIHZhciBoYXNDaGVja2VkID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICByZXR1cm4gZWwuY2hlY2tlZDsKICB9KTsKICBzdGF0ZS5hbGxDaGVha2VkID0gcGF5bG9hZDsKCiAgaWYgKHBheWxvYWQpIHsKICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoIWl0ZW0uY2hlY2tlZCkgewogICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGhhc0NoZWNrZWQubGVuZ3RoIDwgZGF0YS5sZW5ndGgpIHt9IGVsc2UgewogICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgIlNVTSIsIGZ1bmN0aW9uIFNVTShzdGF0ZSkgewogIHZhciB0b3RhbCA9IDA7CiAgdmFyIGRhdGEgPSBzdGF0ZS5jYXJ0R29vZHNMaXN0OwogIHZhciBjaGVhY2tlZEl0ZW1zID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLmNoZWNrZWQ7CiAgfSk7CiAgY2hlYWNrZWRJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICB0b3RhbCA9IHRvdGFsICsgaXRlbS5udW0gKiBwYXJzZUZsb2F0KGl0ZW0ucHJpY2UpOwogIH0pOwogIHRvdGFsID0gcGFyc2VGbG9hdCh0b3RhbC50b0ZpeGVkKDIpKTsKICBzdGF0ZS50b3RhbCA9IHRvdGFsOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsICJOVU1fQ0hBTkdFIiwgZnVuY3Rpb24gTlVNX0NIQU5HRShzdGF0ZSwgX3JlZjQpIHsKICB2YXIgbnVtID0gX3JlZjQubnVtLAogICAgICBpbmRleCA9IF9yZWY0LmluZGV4OwogIHN0YXRlLmNhcnRHb29kc0xpc3RbaW5kZXhdLm51bSA9IG51bTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCAiQUREX0NBUlQiLCBmdW5jdGlvbiBBRERfQ0FSVChzdGF0ZSwgaXRlbSkgewogIHZhciBpbmRleCA9IHNlYXJjaEluZGV4KHN0YXRlLmNhcnRHb29kc0xpc3QsIGl0ZW0sIGl0ZW0udGl0bGUpOwoKICBpZiAoaW5kZXggPT09IC0xKSB7CiAgICBzdGF0ZS5jYXJ0R29vZHNMaXN0LnVuc2hpZnQoaXRlbSk7CiAgfSBlbHNlIHsKICAgIHN0YXRlLmNhcnRHb29kc0xpc3RbaW5kZXhdLm51bSsrOwogIH0KfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICAvL+WRveWQjeepuumXtOeahOaooeWdl+OAguaooeWdl+WGhemDqOebtOaOpeiwg+eUqO+8jOWklumDqOmcgOimgeWRveWQjeepuumXtCjop4Hnu4Tku7YpCiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["F:/前端/mi/src/store/modules/cart.js"],"names":["areaList","searchIndex","types","get","axios","Dialog","state","cartGoodsList","total","allChecked","showAdd","addGoods","actions","CART","payload","commit","apiname","params","_limit","_sort","then","result","console","log","confirm","message","url","method","res","data","err","forEach","item","index","_id","splice","mutations","checked","hasChecked","filter","el","length","allCheaked","cheackedItems","num","parseFloat","price","toFixed","title","unshift","namespaced"],"mappings":";;;;;;;;;AAAA,OAAOA,QAAP,MAAqB,uBAArB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAO,KAAKC,KAAZ,MAAuB,UAAvB,C,CAAiC;;AACjC,SAAQC,GAAR,QAAkB,eAAlB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,MAAT,QAAuB,MAAvB;AACA,IAAMC,KAAK,GAAC;AACVC,EAAAA,aAAa,EAAC,EADJ;AAEXC,EAAAA,KAAK,EAAC,CAFK;AAGXC,EAAAA,UAAU,EAAC,IAHA;AAIVC,EAAAA,OAAO,EAAC,KAJE;AAII;AACdV,EAAAA,QAAQ,EAARA,QALU;AAKD;AACTW,EAAAA,QAAQ,EAAC,EANC,CAME;;AANF,CAAZ;AAUA,IAAMC,OAAO,6CAEXV,KAAK,CAACW,IAFK,kBAEgBC,OAFhB,EAEwB;AAAA,MAAtBC,MAAsB,QAAtBA,MAAsB;AAAA,MAAfT,KAAe,QAAfA,KAAe;AAClCH,EAAAA,GAAG,CAAC;AAACa,IAAAA,OAAO,EAAC,MAAT;AAAgBC,IAAAA,MAAM,EAAC;AAACC,MAAAA,MAAM,EAAC,CAAR;AAAUC,MAAAA,KAAK,EAAC;AAAhB;AAAvB,GAAD,CAAH,CAAqDC,IAArD,CACE,UAAAC,MAAM,EAAE;AAETN,IAAAA,MAAM,CAAC,MAAD,EAAQM,MAAR,CAAN;;AACA,QAAGA,MAAH,EAAU;AACTN,MAAAA,MAAM,CAAC,KAAD,CAAN;AACA;AACD,GAPD;AASD,CAZW,yCAcH,yBAAgBD,OAAhB,EAA0B;AAAA,MAAxBC,MAAwB,SAAxBA,MAAwB;AAAA,MAAjBT,KAAiB,SAAjBA,KAAiB;AAClCgB,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBT,OAAtB;AACCT,EAAAA,MAAM,CAACmB,OAAP,CAAe;AACdC,IAAAA,OAAO,EAAE;AADK,GAAf,EAEGL,IAFH,CAEQ,YAAM;AACdhB,IAAAA,KAAK,CAAC;AACLsB,MAAAA,GAAG,EAAC,kBAAgBZ,OADf;AAEL;AACAa,MAAAA,MAAM,EAAC;AAHF,KAAD,CAAL,CAIGP,IAJH,CAKA,UAAAQ,GAAG,EAAE;AACJ,UAAGA,GAAG,CAACC,IAAJ,CAASC,GAAT,IAAc,CAAjB,EAAmB;AAClBxB,QAAAA,KAAK,CAACC,aAAN,CAAoBwB,OAApB,CAA4B,UAACC,IAAD,EAAMC,KAAN,EAAc;AACzC,cAAGD,IAAI,CAACE,GAAL,IAAUpB,OAAb,EAAqB;AACpBR,YAAAA,KAAK,CAACC,aAAN,CAAoB4B,MAApB,CAA2BF,KAA3B,EAAiC,CAAjC;AACA;AACD,SAJD;AAKAlB,QAAAA,MAAM,CAAC,WAAD,EAAaT,KAAK,CAACC,aAAnB,CAAN;AACAQ,QAAAA,MAAM,CAAC,KAAD,CAAN;AACA,OARD,MAQK;AACJO,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA;AACD,KAjBD;AAoBC,GAvBD;AAwBD,CAxCW,YAAb;AA4CA,IAAMa,SAAS,iDACblC,KAAK,CAACW,IADO,EACD,UAACP,KAAD,EAAOQ,OAAP,EAAiB;AAC7B,MAAGA,OAAH,EAAW;AACVR,IAAAA,KAAK,CAACC,aAAN,GAAoBO,OAApB;AACA,GAFD,MAEK;AACJR,IAAAA,KAAK,CAACC,aAAN,GAAoB,EAApB;AACA;AACD,CAPa,4CAQH,mBAACD,KAAD,EAAOQ,OAAP,EAAiB;AAC1BR,EAAAA,KAAK,CAACC,aAAN,GAAoBO,OAApB;AACA,CAVY,gDAYA,uBAACR,KAAD,SAAyB;AAAA,MAAjB+B,OAAiB,SAAjBA,OAAiB;AAAA,MAATJ,KAAS,SAATA,KAAS;AACvC3B,EAAAA,KAAK,CAACC,aAAN,CAAoB0B,KAApB,EAA2BI,OAA3B,GAAqCA,OAArC;AACA,MAAIR,IAAI,GAAGvB,KAAK,CAACC,aAAjB;AACA,MAAI+B,UAAU,GAAGT,IAAI,CAACU,MAAL,CAAY,UAAAC,EAAE;AAAA,WAAEA,EAAE,CAACH,OAAL;AAAA,GAAd,CAAjB;;AACA,MAAGC,UAAU,CAACG,MAAX,GAAkBZ,IAAI,CAACY,MAA1B,EAAiC;AAChCnC,IAAAA,KAAK,CAACG,UAAN,GAAiB,KAAjB,CADgC,CACT;AACvB,GAFD,MAEK;AACJH,IAAAA,KAAK,CAACG,UAAN,GAAiB,IAAjB;AACA;AACA,CArBa,2CAuBL,kBAACH,KAAD,EAAOQ,OAAP,EAAiB;AACzB,MAAIe,IAAI,GAAGvB,KAAK,CAACC,aAAjB;AACA,MAAI+B,UAAU,GAAGT,IAAI,CAACU,MAAL,CAAY,UAAAC,EAAE;AAAA,WAAEA,EAAE,CAACH,OAAL;AAAA,GAAd,CAAjB;AACA/B,EAAAA,KAAK,CAACoC,UAAN,GAAmB5B,OAAnB;;AACA,MAAGA,OAAH,EAAW;AACVe,IAAAA,IAAI,CAACE,OAAL,CAAa,UAACC,IAAD,EAAQ;AACpB,UAAG,CAACA,IAAI,CAACK,OAAT,EAAiB;AAChBL,QAAAA,IAAI,CAACK,OAAL,GAAa,IAAb;AACA;AACD,KAJD;AAKA,GAND,MAMK;AACJR,IAAAA,IAAI,CAACE,OAAL,CAAa,UAACC,IAAD,EAAQ;AACpB,UAAGM,UAAU,CAACG,MAAX,GAAkBZ,IAAI,CAACY,MAA1B,EAAiC,CAChC,CADD,MACK;AACJT,QAAAA,IAAI,CAACK,OAAL,GAAa,KAAb;AACA;AACD,KALD;AAMC;AACF,CAzCa,sCA2CV,aAAC/B,KAAD,EAAS;AACZ,MAAIE,KAAK,GAAE,CAAX;AACA,MAAIqB,IAAI,GAAGvB,KAAK,CAACC,aAAjB;AACA,MAAIoC,aAAa,GAAGd,IAAI,CAACU,MAAL,CAAY,UAACP,IAAD;AAAA,WAAQA,IAAI,CAACK,OAAb;AAAA,GAAZ,CAApB;AACAM,EAAAA,aAAa,CAACZ,OAAd,CAAsB,UAAAC,IAAI,EAAE;AAC3BxB,IAAAA,KAAK,GAAGA,KAAK,GAAGwB,IAAI,CAACY,GAAL,GAASC,UAAU,CAACb,IAAI,CAACc,KAAN,CAAnC;AACA,GAFD;AAGAtC,EAAAA,KAAK,GAAGqC,UAAU,CAACrC,KAAK,CAACuC,OAAN,CAAc,CAAd,CAAD,CAAlB;AACAzC,EAAAA,KAAK,CAACE,KAAN,GAAYA,KAAZ;AACA,CApDa,6CAsDF,oBAACF,KAAD,SAAqB;AAAA,MAAbsC,GAAa,SAAbA,GAAa;AAAA,MAATX,KAAS,SAATA,KAAS;AAC/B3B,EAAAA,KAAK,CAACC,aAAN,CAAoB0B,KAApB,EAA2BW,GAA3B,GAAiCA,GAAjC;AACA,CAxDY,2CA0DH,kBAACtC,KAAD,EAAO0B,IAAP,EAAc;AACvB,MAAIC,KAAK,GAAGhC,WAAW,CAACK,KAAK,CAACC,aAAP,EAAqByB,IAArB,EAA0BA,IAAI,CAACgB,KAA/B,CAAvB;;AACA,MAAGf,KAAK,KAAK,CAAC,CAAd,EAAgB;AACf3B,IAAAA,KAAK,CAACC,aAAN,CAAoB0C,OAApB,CAA4BjB,IAA5B;AACA,GAFD,MAEK;AACJ1B,IAAAA,KAAK,CAACC,aAAN,CAAoB0B,KAApB,EAA2BW,GAA3B;AAEA;AACD,CAlEY,cAAf;AAsEA,eAAc;AACZM,EAAAA,UAAU,EAAC,IADC;AACI;AAChB5C,EAAAA,KAAK,EAALA,KAFY;AAENM,EAAAA,OAAO,EAAPA,OAFM;AAEEwB,EAAAA,SAAS,EAATA;AAFF,CAAd","sourcesContent":["import areaList from '../../plugins/city.js'\r\nimport searchIndex from '../../plugins/searchIndex.js'\r\nimport * as types from '../types'//整体输入，存为types对象\r\nimport {get} from '../service.js'\r\nimport axios from '../../plugins/axios.js';\r\nimport { Dialog } from 'vant';\r\nconst state={\r\n  cartGoodsList:[],\r\n\ttotal:0,\r\n\tallChecked:true,\r\n  showAdd:false,//编辑地址\r\n  areaList,//省市区列表\r\n  addGoods:[],//选择商品\r\n\t\r\n}\r\n\r\nconst actions = {\r\n\t//请求数据\r\n\t[types.CART]({commit,state},payload){\r\n\t  get({apiname:'cart',params:{_limit:5,_sort:\"date\"}}).then(\r\n\t    result=>{\r\n\t\t\t\t\r\n\t\t\t\tcommit('CART',result)\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tcommit(\"SUM\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t  )\r\n\t},\r\n\t//删除商品\r\n delGoods:({commit,state},payload)=>{\r\n\t console.log(\"payload\",payload)\r\n \t Dialog.confirm({\r\n \t \tmessage: '确定删除该商品吗？'\r\n \t }).then(() => {\r\n\t\t axios({\r\n\t\t\t url:\"/api/addcart/\"+payload,\r\n\t\t\t // params:payload,\r\n\t\t\t method:\"delete\"\r\n\t\t }).then(\r\n\t\t\tres=>{\r\n\t\t\t\tif(res.data.err==0){\r\n\t\t\t\t\tstate.cartGoodsList.forEach((item,index)=>{\r\n\t\t\t\t\t\tif(item._id==payload){\r\n\t\t\t\t\t\t\tstate.cartGoodsList.splice(index,1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tcommit('DEL_GOODS',state.cartGoodsList)\r\n\t\t\t\t\tcommit(\"SUM\")\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log(\"删除失败\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t )\r\n \t \t\r\n \t })\r\n },\r\n}\r\n\r\n\r\nconst mutations={\r\n\t[types.CART]:(state,payload)=>{\r\n\t\tif(payload){\r\n\t\t\tstate.cartGoodsList=payload\r\n\t\t}else{\r\n\t\t\tstate.cartGoodsList=[]\r\n\t\t}\r\n\t},\r\n\t DEL_GOODS:(state,payload)=>{\r\n\t\t state.cartGoodsList=payload\r\n\t },\r\n  //是否选中\r\n CHECKED_GOODS:(state,{checked,index})=>{\r\n\tstate.cartGoodsList[index].checked = checked;\r\n\tlet data = state.cartGoodsList;\r\n\tlet hasChecked = data.filter(el=>el.checked);\r\n\tif(hasChecked.length<data.length){\r\n\t\tstate.allChecked=false;//如果不是所有的商品都被选中，则全选为false\r\n\t}else{\r\n\t\tstate.allChecked=true;\r\n\t}\r\n },\r\n //全选\r\n CHECKALL:(state,payload)=>{\r\n\t let data = state.cartGoodsList;\r\n\t let hasChecked = data.filter(el=>el.checked);\r\n\t state.allCheaked = payload;\r\n\t if(payload){\r\n\t \tdata.forEach((item)=>{\r\n\t \t\tif(!item.checked){\r\n\t \t\t\titem.checked=true;\r\n\t \t\t}\r\n\t \t})\r\n\t }else{\r\n\t \tdata.forEach((item)=>{\r\n\t \t\tif(hasChecked.length<data.length){\r\n\t \t\t}else{\r\n\t \t\t\titem.checked=false;\r\n\t \t\t}\r\n\t \t})\r\n\t \t}\r\n },\r\n //总价\r\n SUM:(state)=>{\r\n\t\tlet total =0;\r\n\t\tlet data = state.cartGoodsList;\r\n\t\tlet cheackedItems = data.filter((item)=>item.checked)\r\n\t\tcheackedItems.forEach(item=>{\r\n\t\t\ttotal = total +(item.num*parseFloat(item.price));\r\n\t\t})\r\n\t\ttotal = parseFloat(total.toFixed(2))\r\n\t\tstate.total=total;\r\n },\r\n\t //数量改变\r\n\t NUM_CHANGE:(state,{num,index})=>{\r\n\t\t state.cartGoodsList[index].num = num;\r\n\t },\r\n\t //加入购物车\r\n\t ADD_CART:((state,item)=>{\r\n\t\t let index = searchIndex(state.cartGoodsList,item,item.title)\r\n\t\t if(index === -1){\r\n\t\t\t state.cartGoodsList.unshift(item);\r\n\t\t }else{\r\n\t\t\t state.cartGoodsList[index].num++;\r\n\r\n\t\t }\r\n\t })\r\n}\r\n\r\n\r\nexport default{\r\n  namespaced:true,//命名空间的模块。模块内部直接调用，外部需要命名空间(见组件)\r\n  state,actions,mutations\r\n}"]}]}