{"remainingRequest":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js!F:\\前端\\mi\\src\\plugins\\axios.js","dependencies":[{"path":"F:\\前端\\mi\\src\\plugins\\axios.js","mtime":1584579635797},{"path":"F:\\前端\\mi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\前端\\mi\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgdm0gZnJvbSAnLi4vbWFpbi5qcyc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXIuanMnOyAvLyBpbXBvcnQgc3RvcmUgZnJvbSAnLi92dWV4LmpzJwoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25zb2xlLmxvZygn5oum5oiq5ZmoJyk7IC8v6K+35rGC5Y+R5Ye65LmL5YmN6K6+572u57uf5LiA55qEdG9rZW4KCiAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIHRva2VuID0gdG9rZW4gPyB0b2tlbiA6ICcnLCBjb25maWcuaGVhZGVycyA9IHsKICAgIHRva2VuOiB0b2tlbgogIH07IC8v5o6n5Yi2bG9hZGluZ+aYvuekugogIC8vIHN0b3JlLnN0YXRlLmJMb2FkaW5nPXRydWU7CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvL+a3u+WKoOS4gOS4quWTjeW6lOeahOaLpuaIquWZqAoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBzdG9yZS5zdGF0ZS5iTG9hZGluZyA9IGZhbHNlOwogIHZhciBjdXJyZW50Um91dGUgPSByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoOwogIGNvbnNvbGUubG9nKCdjdXJyZW50Um91dGUnLCBjdXJyZW50Um91dGUpOwogIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICBpZiAocmVzcG9uc2UuZGF0YS5lcnIgIT0gMCAmJiAhY3VycmVudFJvdXRlLmluY2x1ZGVzKCcvbG9naW4nKSkgewogICAgcm91dGVyLnB1c2goewogICAgICBwYXRoOiAnL2xvZ2luJywKICAgICAgcXVlcnk6IHsKICAgICAgICBwOiBjdXJyZW50Um91dGUKICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpWdWUucHJvdG90eXBlLiRheGlvcyA9IGF4aW9zOwp3aW5kb3cuYXhpb3MgPSBheGlvczsKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["F:/前端/mi/src/plugins/axios.js"],"names":["Vue","vm","axios","router","interceptors","request","use","config","console","log","token","window","localStorage","getItem","headers","error","Promise","reject","response","store","state","bLoading","currentRoute","fullPath","data","err","includes","push","path","query","p","prototype","$axios"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CACA;;AACAD,KAAK,CAACE,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAUC,MAAV,EAAkB;AAChDC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EADgD,CAEhD;;AACA,MAAIC,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAZ;AACAH,EAAAA,KAAK,GAAGA,KAAK,GAAGA,KAAH,GAAW,EAAxB,EACAH,MAAM,CAACO,OAAP,GAAiB;AACfJ,IAAAA,KAAK,EAACA;AADS,GADjB,CAJgD,CAQhD;AACC;;AACA,SAAOH,MAAP;AACD,CAXD,EAWG,UAAUQ,KAAV,EAAiB;AAClB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAbD,E,CAcA;;AACAb,KAAK,CAACE,YAAN,CAAmBc,QAAnB,CAA4BZ,GAA5B,CAAgC,UAASY,QAAT,EAAkB;AACjDC,EAAAA,KAAK,CAACC,KAAN,CAAYC,QAAZ,GAAsB,KAAtB;AACA,MAAIC,YAAY,GAAGnB,MAAM,CAACmB,YAAP,CAAoBC,QAAvC;AACAf,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2Ba,YAA3B;AACAd,EAAAA,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACM,IAArB;;AACA,MAAGN,QAAQ,CAACM,IAAT,CAAcC,GAAd,IAAmB,CAAnB,IAAwB,CAACH,YAAY,CAACI,QAAb,CAAsB,QAAtB,CAA5B,EAA4D;AAC3DvB,IAAAA,MAAM,CAACwB,IAAP,CAAY;AACXC,MAAAA,IAAI,EAAC,QADM;AAEXC,MAAAA,KAAK,EAAC;AAACC,QAAAA,CAAC,EAACR;AAAH;AAFK,KAAZ;AAIA;;AACD,SAAOJ,QAAP;AACA,CAZD,EAYE,UAASH,KAAT,EAAe;AAChB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAdD;AAgBAf,GAAG,CAAC+B,SAAJ,CAAcC,MAAd,GAAuB9B,KAAvB;AACAS,MAAM,CAACT,KAAP,GAAeA,KAAf;AACA,eAAeA,KAAf","sourcesContent":["import Vue from 'vue'\r\nimport vm from '../main.js'\r\nimport axios from 'axios'\r\nimport router from './router.js'\r\n// import store from './vuex.js'\r\naxios.interceptors.request.use(function (config) {\r\n\tconsole.log('拦截器')\r\n\t//请求发出之前设置统一的token\r\n\tlet token = window.localStorage.getItem('token')\r\n\ttoken = token ? token : '',\r\n\tconfig.headers = {\r\n\t \ttoken:token\r\n }\r\n //控制loading显示\r\n  // store.state.bLoading=true;\r\n  return config;\r\n}, function (error) {\r\n  return Promise.reject(error);\r\n});\r\n//添加一个响应的拦截器\r\naxios.interceptors.response.use(function(response){\r\n\tstore.state.bLoading= false;\r\n\tlet currentRoute = router.currentRoute.fullPath;\r\n\tconsole.log('currentRoute',currentRoute)\r\n\tconsole.log(response.data)\r\n\tif(response.data.err!=0 && !currentRoute.includes('/login')){\r\n\t\trouter.push({\r\n\t\t\tpath:'/login',\r\n\t\t\tquery:{p:currentRoute}\r\n\t\t})\r\n\t}\r\n\treturn response;\r\n},function(error){\r\n\treturn Promise.reject(error)\r\n});\r\n\r\nVue.prototype.$axios = axios;\r\nwindow.axios = axios\r\nexport default axios;\r\n"]}]}